<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Finding Urls Used In R Packages &#8211; Road of Excess</title>
<meta name="description" content="How to figure out URLs internally used in some R packages">
<meta name="keywords" content="R, web services, API, JSON, XML">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Finding Urls Used In R Packages">
<meta name="twitter:description" content="How to figure out URLs internally used in some R packages">
<meta name="twitter:site" content="@david_montaner">
<meta name="twitter:creator" content="@david_montaner">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Finding Urls Used In R Packages">
<meta property="og:description" content="How to figure out URLs internally used in some R packages">
<meta property="og:url" content="http://localhost:4000/finding-urls-used-in-r-packages/">
<meta property="og:site_name" content="Road of Excess">





<link rel="canonical" href="http://localhost:4000/finding-urls-used-in-r-packages/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Road of Excess Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<!-- <link rel="shortcut icon" href="http://localhost:4000/favicon.png"> -->
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://localhost:4000" >latest</a></li>
		  
		    
		    <li><a href="http://localhost:4000/archive/" >Archive</a></li>
		  
		    
		    <li><a href="http://localhost:4000/tags/" >Tags</a></li>
		  
		    
		    <li><a href="http://localhost:4000/search/" >Search</a></li>
		  
		    
		    <li><a href="http://localhost:4000/about/" >About</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
      <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">Road of Excess</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">a data science blog</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="http://localhost:4000/tags/#R" title="Pages tagged R">R</a></li><li><a href="http://localhost:4000/tags/#web services" title="Pages tagged web services">web services</a></li><li><a href="http://localhost:4000/tags/#API" title="Pages tagged API">API</a></li><li><a href="http://localhost:4000/tags/#JSON" title="Pages tagged JSON">JSON</a></li><li><a href="http://localhost:4000/tags/#XML" title="Pages tagged XML">XML</a></li>
        </ul>
        
          <h1 class="entry-title">Finding Urls Used In R Packages</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="http://localhost:4000/images/dmontaner.jpg" class="bio-photo" alt="David Montaner bio photo"></a>
        
        <span class="author vcard">By <span class="fn">David Montaner</span></span>
        <span class="entry-date date published"><time datetime="2016-07-28T00:00:00+01:00"><i class="fa fa-calendar-o"></i> July 28, 2016</time></span>
        
        
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=R,webservices,API,JSON,XML&amp;text=Finding%20Urls%20Used%20In%20R%20Packages&amp;url=http://localhost:4000/finding-urls-used-in-r-packages/&amp;via=david_montaner" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/finding-urls-used-in-r-packages/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=http://localhost:4000/finding-urls-used-in-r-packages/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
      </footer>
      <div class="entry-content">
        <!--
http://stackoverflow.com/questions/4962495/where-to-find-free-public-web-services
-->

<p>Many R libraries query web services for information.
Sometimes the purpose is to download the complete dataset to be analyzed.
In other occasions we just need to add some extra bits to the data we are exploring.
Packages like <a href="https://cran.rstudio.com/web/packages/RStripe/index.html" title="RStripe: A Convenience Interface for the Stripe Payment API">RStripe</a> and <a href="https://cran.r-project.org/web/packages/tumblR/index.html" title="tumblR: Access to Tumblr v2 API">tumblR</a> in <a href="https://cran.r-project.org" title="The Comprehensive R Archive Network">CRAN</a>
or <a href="http://bioconductor.org/packages/release/bioc/html/biomaRt.html" title="Interface to BioMart databases (e.g. Ensembl, COSMIC, Wormbase and Gramene)">biomaRt</a> in <a href="http://bioconductor.org" title="Bioconductor provides tools for the analysis and comprehension of high-throughput genomic data.">Bioconductor</a>
perform such queries.</p>

<p>Usually,
this kind of packages use the R library <a href="https://cran.r-project.org/web/packages/RCurl/index.html" title="RCurl: General Network (HTTP/FTP/...) Client Interface for R">RCurl</a> 
(or some alternative such as <a href="https://cran.r-project.org/web/packages/curl/index.html" title="curl: A Modern and Flexible Web Client for R">curl</a>) 
to connect to the specific web service and get the required data.
Generally,
some function in the package
composes a URL following the web API specification, 
and then, <code class="highlighter-rouge">RCurl::getURL</code> is called over this URL to retrieve the data into the R session.</p>

<p>Getting to know such URLs is generally valuable as it can be used for
testing, debugging, understanding how the API works, or simply to use it with some other software.
Nevertheless, most of such libraries build the URLs internally 
and do not make them available to the end user.</p>

<p>Occasionally I like to <strong>rebuild</strong> one of such packages
for the URLs to be printed when the web service is called. 
Few days ago I did so with the <a href="https://cran.r-project.org/web/packages/Rlabkey/index.html" title="Rlabkey: Data Exchange Between R and LabKey Server">Rlabkey</a> library 
and I would like to share here how I did it as it may be useful for some of you:</p>

<ol>
  <li>
    <p>I cloned the library from its <a href="https://github.com/LabKey/labkey-api-r">Github repository</a>
but you could also download the source code from <a href="https://cran.r-project.org" title="The Comprehensive R Archive Network">CRAN</a> or <a href="http://bioconductor.org" title="Bioconductor provides tools for the analysis and comprehension of high-throughput genomic data.">Bioconductor</a>.</p>
  </li>
  <li>
    <p>I explored the <a href="https://github.com/LabKey/labkey-api-r/blob/develop/Rlabkey/DESCRIPTION">DESCRIPTION</a> file
and found out that <a href="https://cran.r-project.org/web/packages/Rlabkey/index.html" title="Rlabkey: Data Exchange Between R and LabKey Server">Rlabkey</a> uses <a href="https://cran.r-project.org/web/packages/RCurl/index.html" title="RCurl: General Network (HTTP/FTP/...) Client Interface for R">RCurl</a>.
In this case it is indicated in the <em>Depends</em> row of the DESCRIPTION file, 
but for some other libraries it will usually be in the <em>Imports</em> 
or even in the <em>Suggests</em> one.</p>
  </li>
  <li>
    <p>I went to the <a href="https://github.com/LabKey/labkey-api-r/tree/develop/Rlabkey/R">R</a> folder
where the R code leaves,
and searched for scripts with the word <code class="highlighter-rouge">getURL</code>
(actually <a href="https://cran.r-project.org/web/packages/Rlabkey/index.html" title="Rlabkey: Data Exchange Between R and LabKey Server">Rlabkey</a> uses <code class="highlighter-rouge">getURI</code> which is a synonym of <code class="highlighter-rouge">getURL</code>).
I used the Linux Shell command
<a href="http://linuxcommand.org/man_pages/grep.html">grep</a>
but any other method will do…
even <a href="https://github.com/LabKey/labkey-api-r/search?utf8=✓&amp;q=getURI&amp;type=Code">searching in Gighub</a>.</p>
  </li>
  <li>
    <p>I found out that the call to <code class="highlighter-rouge">getURI</code> is done by the
<a href="https://github.com/LabKey/labkey-api-r/blob/6f0983f5d460ffbe2014bfe87e5c07cc058d29e9/Rlabkey/R/labkey.defaults.R#L51">labkey.get</a>
function in the  <a href="https://cran.r-project.org/web/packages/Rlabkey/index.html" title="Rlabkey: Data Exchange Between R and LabKey Server">Rlabkey</a> library, 
and that the function takes the desired URL as an input parameter.
Then I just added a <code class="highlighter-rouge">print</code> at the beginning of the function.</p>
  </li>
  <li>
    <p>I reinstalled the library from my local copy using:<br />
<code class="highlighter-rouge">install.packages ("labkey-api-r/Rlabkey", repos = NULL)</code></p>
  </li>
</ol>

<p><a href="https://github.com/dmontaner/labkey-api-r/commit/fd57e1d73782e1c579338da306ab0258ea4f1ffb">Here</a>
you can find the git commit adding the <code class="highlighter-rouge">print</code> line.</p>

<h2 id="hidden-curl-calls">Hidden curl calls</h2>

<p>Many web services yield <strong>JSON</strong> formatted results.
Usually those are read into R <em>lists</em> or <em>data.frames</em>
using functions like <code class="highlighter-rouge">fromJSON</code> implemented in the <a href="https://cran.rstudio.com/web/packages/jsonlite/index.html" title="jsonlite: A Robust, High Performance JSON Parser and Generator for R">jsonlite</a> library.
Such functions can read from a text file but also from a web connection;
for example <code class="highlighter-rouge">fromJSON</code> internally calls <code class="highlighter-rouge">RCurl::getURL</code> to read from a URL.</p>

<p>Thus, when looking for the URL as I did above,
you may sometimes need to search for the <code class="highlighter-rouge">fromJSON</code> or similar functions.</p>

<p>The same can happen with serviced returning <strong>XML</strong> format.
Functions like
may be then used to find where the URL is called so that it can be printed for you.</p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/articles/find-r-dataframe-column-classes/" class="btn" title="Finding R data.frame clas for all columns">Previous</a>
      
      
        <a href="http://localhost:4000/template/" class="btn" title="Template">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2017 David Montaner. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/david_montaner" title="David Montaner on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="https://linkedin.com/in/dmontaner" title="David Montaner on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	
	
	<a href="https://github.com/dmontaner" title="David Montaner on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>




</body>
</html>
